\documentclass{standalone}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{positioning,fit,shapes,calc}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{backgrounds}
\definecolor{processblue}{cmyk}{1,1,1,0}
\definecolor{myblue}{rgb}{0.5,0.5,1}

\newenvironment{graph}{
  \begin{tikzpicture}
  [
    -latex, auto,
    node distance = 1.5cm and 2.5cm,
    on grid, semithick,
    state/.style = {
      rectangle,
      top color = white,
      bottom color = processblue!10,
      % bottom color = white,
      draw,
      processblue,
      text=black,
      minimum width = 2.0cm,
      minimum height = 0.5cm
    },
    box/.style = {
      rectangle,
      % rounded corners,
      % top color = white,
      bottom color = processblue!4,
      top color = processblue!4,
      draw,
      processblue,
      text=black,
      minimum width = 0.0cm,
      minimum height = 0.0cm
    },
    operation/.style = {
      circle,
      top color = white,
      % bottom color = white,
      bottom color = processblue!10,
      draw,
      processblue,
      text=black,
      minimum width = 0.9cm
    },
    connect/.style = {
      circle,
      top color = black,
      bottom color = black,
      draw,
      black,
      text=black,
      inner sep = 1pt,
    },
    >=Stealth
  ]
}{
  \end{tikzpicture}
}

\usepackage{times}
\usepackage{amssymb}
\usepackage{utilities}

\begin{document}
\begin{graph}
  \node[state] (X1) {$x_1$};
  \node[state] (X2) [right = of X1] {$x_2$};
  \node[state] (X3) [right = of X2] {$x_3$};
  \node[state] (X4) [right = of X3] {$x_4$};
  \node[state] (X5) [right = 3 of X4] {$x_5$};
  \node[state] (X6) [right = of X5] {$x_6$};
  \node[state] (X7) [right = of X6] {$x_7$};
  \node[state] (X8) [right = of X7] {$x_8$};

  \node[state] (Y1) [below = of X1] {$w_1$};
  \node[state] (Y2) [right = of Y1] {$w_2$};
  \node[state] (Y3) [right = of Y2] {$w_3$};
  \node[state] (Y4) [right = of Y3] {$w_4$};
  \node[state] (Y5) [right = 3 of Y4] {$w_5$};
  \node[state] (Y6) [right = of Y5] {$w_6$};
  \node[state] (Y7) [right = of Y6] {$w_7$};
  \node[state] (Y8) [right = of Y7] {$w_8$};

  \node[state] (Z1) [below = of Y1] {$s_1$};
  \node[state] (Z2) [right = of Z1] {$s_2$};
  \node[state] (Z3) [right = of Z2] {$s_3$};
  \node[state] (Z4) [right = of Z3] {$s_4$};
  \node[state] (Z5) [right = 3 of Z4] {$s_5$};
  \node[state] (Z6) [right = of Z5] {$s_6$};
  \node[state] (Z7) [right = of Z6] {$s_7$};
  \node[state] (Z8) [right = of Z7] {$s_8$};

  \begin{scope}[on background layer]
    \node[box,rounded corners,fit=(X1) (Z1),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_1$}}] (T) {};
    \node[box,rounded corners,fit=(X2) (Z2),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_2$}}] (T) {};
    \node[box,rounded corners,fit=(X3) (Z3),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_3$}}] (T) {};
    \node[box,rounded corners,fit=(X4) (Z4),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_4$}}] (T) {};
    \node[box,rounded corners,fit=(X5) (Z5),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_5$}}] (T) {};
    \node[box,rounded corners,fit=(X6) (Z6),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_6$}}] (T) {};
    \node[box,rounded corners,fit=(X7) (Z7),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_7$}}] (T) {};
    \node[box,rounded corners,fit=(X8) (Z8),inner sep = 0.15cm, text = black, fill opacity = 0.8,text height=0.0cm,label={[label distance = 10pt]{$\mathscr{G}_8$}}] (T) {};

    \node[box,fit=(X1) (X4),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};
    \node[box,fit=(Y1) (Y4),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};
    \node[box,fit=(Z1) (Z4),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};

    \node[box,fit=(X5) (X8),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};
    \node[box,fit=(Y5) (Y8),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};
    \node[box,fit=(Z5) (Z8),inner sep = 8pt, fill opacity = 0.2,minimum width=10.4cm,myblue,thick,bottom color = myblue] (T) {};
  \end{scope}
\end{graph}
\end{document}